@using System
@model IDictionary<string, string>

    @{
    string Get(string key, string fallback = "")
        => Model != null && Model.TryGetValue(key, out var v) && !string.IsNullOrWhiteSpace(v) ? v : fallback;

    var appName = Get("appName", "Ezenity");
    var firstName = Get("firstName", "there");
    var year = Get("currentYear", DateTime.UtcNow.Year.ToString());

    // Optional URLs; provide safe defaults to your site.
    var loginUrl = Get("loginUrl", "https://ezenity.com/account/login");
    var resetUrl = Get("resetUrl", "https://ezenity.com/account/forgot-password");

    var bodyContent = Get("bodyContent",
        $"An account with this email address already exists. You can sign in, or reset your password if you don’t remember it.");

    var supportEmail = Get("supportEmail", $"support@{appName.ToLowerInvariant()}.com");
    var title = Get("templateTitle", "Account already exists");
    }

    <!doctype html>
    <html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="x-apple-disable-message-reformatting" />
        <title>@title</title>
    </head>
    <body style="margin:0;padding:0;background-color:#f4f4f4;">
        <div style="display:none;max-height:0;overflow:hidden;opacity:0;color:transparent;">
            This email address is already registered with @appName.
        </div>

        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background-color:#f4f4f4;">
            <tr>
                <td align="center" style="padding:24px;">
                    <table role="presentation" width="600" cellpadding="0" cellspacing="0"
                           style="width:600px;max-width:600px;background:#ffffff;border-radius:8px;overflow:hidden;">
                        <tr>
                            <td style="padding:20px 24px;background:#111827;color:#ffffff;font-family:Arial,Helvetica,sans-serif;">
                                <div style="font-size:16px;font-weight:700;">@appName</div>
                                <div style="font-size:12px;opacity:0.9;margin-top:6px;">@title</div>
                            </td>
                        </tr>

                        <tr>
                            <td style="padding:24px;font-family:Arial,Helvetica,sans-serif;color:#111;font-size:14px;line-height:20px;">
                                <p style="margin:0 0 12px 0;">Hello @firstName,</p>

                                <p style="margin:0 0 16px 0;">@bodyContent</p>

                                <table role="presentation" cellpadding="0" cellspacing="0" style="margin:16px 0;">
                                    <tr>
                                        <td bgcolor="#2563eb" style="border-radius:6px;">
                                            <a href="@loginUrl"
                                               style="display:inline-block;padding:12px 18px;font-family:Arial,Helvetica,sans-serif;font-size:14px;color:#ffffff;text-decoration:none;font-weight:700;">
                                                Sign in
                                            </a>
                                        </td>
                                    </tr>
                                </table>

                                <p style="margin:0;color:#444;">
                                    Forgot your password? Reset it here:
                                    <a href="@resetUrl" style="color:#2563eb;text-decoration:underline;">@resetUrl</a>
                                </p>

                                <p style="margin:16px 0 0 0;color:#666;font-size:12px;line-height:18px;">
                                    If you didn’t attempt to register, you can safely ignore this email. Need help? Contact @supportEmail.
                                </p>
                            </td>
                        </tr>

                        <tr>
                            <td style="padding:14px 24px;background:#f9fafb;color:#6b7280;font-family:Arial,Helvetica,sans-serif;font-size:12px;">
                                © @appName @year — Automated message, please do not reply.
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </body>
</html>
