.gateRoot {
    position: fixed;
    inset: 0;
    overflow: hidden;
    background: #05060b;
    color: #e5e7eb;
    font-family: Arial, Helvetica, sans-serif;
}

/* Make sure background layers NEVER block clicks */
.gateLayer,
.gateFog,
.gateNoise,
.gateEmbers,
.gateMeteor {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

/* --- Intro color sweep: more aggressive, less "flat" --- */
.gateLayer--green {
    background: radial-gradient(1200px 800px at 25% 30%, rgba(34,197,94,0.95), rgba(2,6,23,0.98));
    animation: fadeGreen 3.4s ease forwards;
}

.gateLayer--red {
    background: radial-gradient(1000px 700px at 70% 35%, rgba(127,29,29,0.95), rgba(2,6,23,0.985));
    opacity: 0;
    animation: fadeRed 3.6s ease forwards;
}

.gateLayer--steel {
    background: radial-gradient(1200px 900px at 50% 55%, rgba(148,163,184,0.28), rgba(2,6,23,0.99));
    opacity: 0;
    animation: fadeSteel 3.8s ease forwards;
}

.gateLayer--gold {
    background: radial-gradient(900px 700px at 56% 48%, rgba(234,179,8,0.24), rgba(2,6,23,0.995)), radial-gradient(600px 420px at 20% 70%, rgba(250,204,21,0.12), rgba(2,6,23,0.995));
    opacity: 0;
    animation: fadeGold 4.2s ease forwards;
}

/* Lava shimmer always moving */
.gateLayer--lava {
    background: radial-gradient(circle at 18% 42%, rgba(234,179,8,0.14), transparent 52%), radial-gradient(circle at 70% 60%, rgba(239,68,68,0.12), transparent 55%), radial-gradient(circle at 50% 50%, rgba(34,197,94,0.08), transparent 60%);
    filter: blur(18px) saturate(1.35);
    opacity: 0.55;
    mix-blend-mode: screen;
    animation: lavaMove 12s ease-in-out infinite;
}

/* Fog */
.gateFog {
    background: radial-gradient(900px 600px at 50% 55%, rgba(255,255,255,0.06), rgba(0,0,0,0.55));
    filter: blur(10px);
    opacity: 0.5;
    animation: fogDrift 10s ease-in-out infinite;
}

/* Subtle noise overlay */
.gateNoise {
    opacity: 0.10;
    background-image: repeating-linear-gradient(0deg, rgba(255,255,255,0.04) 0, rgba(255,255,255,0.04) 1px, transparent 2px, transparent 4px);
    mix-blend-mode: overlay;
    animation: noiseShift 1.2s steps(2) infinite;
}

/* Embers (fake particles) */
.gateEmbers {
    opacity: 0.35;
    background-image: radial-gradient(circle, rgba(250,204,21,0.75) 0 2px, transparent 3px), radial-gradient(circle, rgba(239,68,68,0.55) 0 1px, transparent 2px), radial-gradient(circle, rgba(148,163,184,0.35) 0 1px, transparent 2px);
    background-size: 240px 240px, 180px 180px, 320px 320px;
    background-position: 0 0, 40px 90px, 100px 40px;
    animation: embersDrift 9s linear infinite;
}

/* Shooting meteor */
.gateMeteor::before {
    content: "";
    position: absolute;
    width: 320px;
    height: 3px;
    left: -360px;
    top: 22%;
    background: linear-gradient(90deg, transparent, rgba(250,204,21,0.95), transparent);
    filter: blur(0.2px);
    transform: rotate(12deg);
    animation: meteorRun 6.8s linear infinite;
    opacity: 0.7;
}

/* --- Content --- */
.gateContent {
    position: relative;
    z-index: 5;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 22px;
    text-align: center;
}

.gateBrand {
    margin-bottom: 18px;
    opacity: 0.96;
}

.gateTitle {
    font-size: 26px;
    font-weight: 900;
    letter-spacing: 0.8px;
}

.gateTag {
    margin-top: 6px;
    font-size: 12px;
    opacity: 0.78;
    letter-spacing: 0.5px;
}

/* Sigils are positioned by CSS vars so they're not stuck center */
.sigilField {
    position: relative;
    width: min(900px, 94vw);
    height: min(520px, 56vh);
}

/* Sigil button */
.sigil {
    position: absolute;
    left: var(--x);
    top: var(--y);
    transform: translate(-50%, -50%) rotate(var(--r));
    border: 0;
    background: transparent;
    padding: 0;
    cursor: pointer;
    outline: none;
    filter: drop-shadow(0 18px 40px rgba(0,0,0,0.72));
    animation: sigilFloat 3.2s ease-in-out infinite;
    animation-delay: var(--d);
}

/* sizes */
.sigil--xl {
    width: 220px;
    height: 220px;
}

.sigil--md {
    width: 150px;
    height: 150px;
}

.sigil--sm {
    width: 128px;
    height: 128px;
}

/* ring */
.sigil__ring {
    position: absolute;
    inset: -10px;
    border-radius: 999px;
    border: 2px solid rgba(148,163,184,0.18);
    box-shadow: 0 0 0 6px rgba(0,0,0,0.22) inset, 0 0 0 1px rgba(0,0,0,0.35);
    opacity: 0.9;
}

/* image */
.sigil__img {
    width: 100%;
    height: 100%;
    border-radius: 999px;
    object-fit: cover;
    filter: contrast(1.05) saturate(0.9) brightness(0.92);
    box-shadow: 0 0 0 2px rgba(0,0,0,0.35) inset;
    user-select: none;
}

/* metallic shine sweep */
.sigil__shine {
    position: absolute;
    inset: 0;
    border-radius: 999px;
    background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.12) 25%, transparent 55%);
    transform: translateX(-40%);
    opacity: 0.0;
    animation: shine 4.8s ease-in-out infinite;
}

/* feedback: click glow */
.sigil.is-hit {
    transform: translate(-50%, -50%) rotate(var(--r)) scale(1.05);
}

    .sigil.is-hit .sigil__ring {
        border-color: rgba(250,204,21,0.55);
        box-shadow: 0 0 22px rgba(250,204,21,0.18), 0 0 0 6px rgba(0,0,0,0.22) inset;
    }

/* intro not armed => dim a bit (but still clickable feedback) */
.sigil.is-dim {
    opacity: 0.85;
}

/* hint */
.gateHint {
    margin-top: 14px;
    font-size: 12px;
    opacity: 0.72;
    letter-spacing: 0.35px;
}

/* footer */
.gateFooter {
    position: absolute;
    bottom: 14px;
    left: 0;
    right: 0;
    display: flex;
    gap: 10px;
    justify-content: center;
    font-size: 11px;
    opacity: 0.55;
}

    .gateFooter .sep {
        opacity: 0.65;
    }

/* flash feedback (good/bad) without revealing progress */
.gateRoot--good .gateFog {
    opacity: 0.65;
}

.gateRoot--bad .gateContent {
    animation: shake 520ms ease;
}

/* Animations */
@keyframes fadeGreen {
    0% {
        opacity: 1;
    }

    55% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

@keyframes fadeRed {
    0% {
        opacity: 0;
    }

    20% {
        opacity: 0;
    }

    55% {
        opacity: 1;
    }

    100% {
        opacity: 0.2;
    }
}

@keyframes fadeSteel {
    0% {
        opacity: 0;
    }

    45% {
        opacity: 0;
    }

    80% {
        opacity: 0.85;
    }

    100% {
        opacity: 1;
    }
}

@keyframes fadeGold {
    0% {
        opacity: 0;
    }

    60% {
        opacity: 0;
    }

    92% {
        opacity: 0.75;
    }

    100% {
        opacity: 0.92;
    }
}

@keyframes lavaMove {
    0% {
        transform: translate3d(-3%, -2%, 0) scale(1.02);
    }

    50% {
        transform: translate3d(3%, 2%, 0) scale(1.06);
    }

    100% {
        transform: translate3d(-3%, -2%, 0) scale(1.02);
    }
}

@keyframes fogDrift {
    0% {
        transform: translate3d(-1%, 0, 0);
    }

    50% {
        transform: translate3d(1%, 0, 0);
    }

    100% {
        transform: translate3d(-1%, 0, 0);
    }
}

@keyframes noiseShift {
    0% {
        transform: translate3d(0,0,0);
    }

    100% {
        transform: translate3d(1px,-1px,0);
    }
}

@keyframes embersDrift {
    0% {
        background-position: 0 0, 40px 90px, 100px 40px;
    }

    100% {
        background-position: 0 -520px, 40px -420px, 100px -620px;
    }
}

@keyframes meteorRun {
    0% {
        transform: translateX(0) rotate(12deg);
        opacity: 0;
    }

    12% {
        opacity: 0.9;
    }

    60% {
        opacity: 0.75;
    }

    100% {
        transform: translateX(calc(100vw + 700px)) rotate(12deg);
        opacity: 0;
    }
}

@keyframes sigilFloat {
    0%,100% {
        transform: translate(-50%, -50%) rotate(var(--r)) translateY(0) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) rotate(var(--r)) translateY(-6px) scale(1.01);
    }
}

@keyframes shine {
    0%, 55% {
        opacity: 0.0;
        transform: translateX(-40%);
    }

    70% {
        opacity: 0.45;
    }

    100% {
        opacity: 0.0;
        transform: translateX(40%);
    }
}

@keyframes shake {
    0% {
        transform: translateX(0);
    }

    15% {
        transform: translateX(-6px);
    }

    30% {
        transform: translateX(5px);
    }

    45% {
        transform: translateX(-4px);
    }

    60% {
        transform: translateX(3px);
    }

    75% {
        transform: translateX(-2px);
    }

    100% {
        transform: translateX(0);
    }
}

/* Mobile */
@media (max-width: 520px) {
    .sigil--xl {
        width: 180px;
        height: 180px;
    }

    .sigil--md {
        width: 132px;
        height: 132px;
    }

    .sigil--sm {
        width: 110px;
        height: 110px;
    }
}
